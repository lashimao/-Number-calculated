import { Chapter } from './types';

export const COURSE_CONTENT: Chapter[] = [
    {
        id: "intro",
        title: "1. 误差与有效数字",
        description: "必考填空/选择/小计算",
        keyPoints: ["绝对误差 vs 相对误差", "有效数字定义", "数值运算原则"],
        content: `
### 核心考点

#### 1. 绝对误差与相对误差
*   **绝对误差**: $e^* = x^* - x$ （近似值 - 真实值，有些教材定义反之，注意绝对值）
*   **绝对误差限**: $|e^*| \\le \\varepsilon$
*   **相对误差限**: $\\varepsilon_r \\approx \\frac{\\varepsilon}{|x^*|}$

#### 2. 有效数字
*   **定义**: 从左边第一个非零数字起，到末位止。
*   **考点**: 给一个近似数（如 $0.03050$），问有几位有效数字？
    *   **答案**: 4位 ($3, 0, 5, 0$)。

#### 3. 有效数字与误差的关系 (公式必背)
若 $x^*$ 具有 $n$ 位有效数字，则其相对误差限为：
$$ \\varepsilon_r \\le \\frac{1}{2a_1} \\times 10^{-(n-1)} $$
(其中 $a_1$ 是第一位有效数字)

#### 4. 数值运算原则 (避坑指南)
1.  **避免两个相近的数相减**: 会导致有效数字严重丢失（如 $\\sqrt{2001} - \\sqrt{2000}$ 应分子有理化）。
2.  **防止大数“吃掉”小数**: 加减法时先加小的，再加大的。
3.  **避免除数绝对值过小**: 会导致误差急剧放大。
`
    },
    {
        id: "nonlinear",
        title: "2. 非线性方程求根",
        description: "计算题重点，掌握牛顿法",
        keyPoints: ["二分法", "简单迭代法", "牛顿迭代法 (⭐超高频)"],
        content: `
### 核心考点

#### 1. 二分法
*   **原理**: 若 $f(a)f(b) < 0$，则区间 $(a, b)$ 内有根。
*   **收敛性**: 线性收敛，速度慢。
*   **误差估计 (考点)**: 给定精度 $\\varepsilon$，求需要二分多少次 $k$？
    $$ \\frac{b-a}{2^{k+1}} < \\varepsilon $$

#### 2. 简单迭代法
*   将 $f(x)=0$ 改写为 $x = \\varphi(x)$。
*   **收敛充要条件**: $|\\varphi'(x)| < 1$ 在根的邻域内成立。$|\\varphi'(x)|$ 越小收敛越快。

#### 3. 牛顿迭代法 (Newton法) —— ⭐超高频考点
*   **几何意义**: 切线法。
*   **迭代公式 (死记硬背)**:
    $$ x_{k+1} = x_k - \\frac{f(x_k)}{f'(x_k)} $$
*   **收敛性**: 在单根附近是**平方收敛 (二阶收敛)**，速度非常快。
*   **计算题套路**: 给一个方程，给初值 $x_0$，让你算 $x_1, x_2$。记得求导数 $f'(x)$ 别求错。
`
    },
    {
        id: "linear",
        title: "3. 线性方程组解法",
        description: "计算大题，直接法与迭代法",
        keyPoints: ["高斯列主元消去", "LU分解", "Jacobi vs Gauss-Seidel"],
        content: `
### 核心考点

#### 1. 高斯列主元消去法
*   **为什么要“列主元”?** 为了避免除数(主元)过小导致误差扩散。
*   **步骤**: 在消元前，先把当前列绝对值最大的元素交换到主对角线上，然后再消元。

#### 2. LU分解 (Doolittle分解)
*   将矩阵 $A$ 分解为 $L$ (下三角，对角线全为1) 和 $U$ (上三角)。
*   **考题形式**: 给你一个矩阵，求它的 $L$ 和 $U$。

#### 3. 迭代法 (Jacobi vs Gauss-Seidel)
公式不用死记矩阵形式，记分量形式更好算。

*   **Jacobi (雅可比)**: 算 $x^{(k+1)}$ 时，全部用旧值 $x^{(k)}$。
    $$ x_i^{(k+1)} = \\frac{1}{a_{ii}} (b_i - \\sum_{j \\ne i} a_{ij} x_j^{(k)}) $$
*   **Gauss-Seidel (高斯-赛德尔)**: 算 $x^{(k+1)}$ 时，能用新值就用新值（即前面算出来的分量立马用）。
*   **收敛条件**: 若矩阵是**严格对角占优**的（对角线元素的绝对值 > 这一行其他元素绝对值之和），则两种方法都收敛。
`
    },
    {
        id: "interpolation",
        title: "4. 插值法",
        description: "计算大题，一定要会列差商表",
        keyPoints: ["拉格朗日插值", "牛顿插值 (⭐首选)", "三次样条"],
        content: `
### 核心考点
题目通常是：给几个点 $(x_i, y_i)$，求插值多项式。

#### 1. 拉格朗日 (Lagrange) 插值
*   **核心**: 写出基函数 $l_i(x)$。
*   **公式结构**:
    $$ L_n(x) = \\sum_{i=0}^n y_i l_i(x) $$
    其中 $l_i(x) = \\prod_{j \\ne i} \\frac{x - x_j}{x_i - x_j}$。
*   **特征**: 形式对称，但增加节点时需要重新计算，不灵活。

#### 2. 牛顿 (Newton) 插值 —— ⭐首选方法
*   **核心**: **差商表** (一定要会列差商表)。
*   **公式**:
    $$ N_n(x) = f(x_0) + f[x_0, x_1](x-x_0) + f[x_0, x_1, x_2](x-x_0)(x-x_1) + \\dots $$
*   **特征**: 具有承袭性，增加节点只需在后面加一项，不用推倒重来。

#### 3. 三次样条插值 (了解)
*   满足二阶导数连续。
*   知道“三弯矩方程”是用来求二阶导数 $M_i$ 的即可。
`
    },
    {
        id: "fitting",
        title: "5. 曲线拟合 (最小二乘法)",
        description: "误差平方和最小化",
        keyPoints: ["最小二乘原理", "法方程组"],
        content: `
### 核心考点
*   **区别**: 插值必须过所有点，拟合不需要过点，只要整体误差最小。

#### 1. 最小二乘原理
使误差平方和 $S = \\sum (y_i - \\varphi(x_i))^2$ 最小。

#### 2. 线性拟合 ($y = a + bx$)
*   **法方程组 (必须会列)**:
    $$
    \\begin{cases}
    na + (\\sum x_i)b = \\sum y_i \\\\
    (\\sum x_i)a + (\\sum x_i^2)b = \\sum x_i y_i
    \\end{cases}
    $$
*   **计算题**: 列表计算 $\\sum x_i, \\sum x_i^2, \\sum y_i, \\sum x_iy_i$，代入解方程组求 $a, b$。

#### 3. 非线性化线性
如 $y = ae^{bx}$，两边取对数 $\\ln y = \\ln a + bx$，令 $Y = \\ln y, A = \\ln a$，转化为线性拟合。
`
    },
    {
        id: "integration",
        title: "6. 数值积分",
        description: "公式题，背诵基本公式",
        keyPoints: ["代数精度", "梯形公式", "辛普森公式", "复化求积"],
        content: `
### 核心考点

#### 1. 代数精度
*   **梯形公式精度**: 1次。
*   **辛普森 (Simpson) 公式精度**: 3次。

#### 2. 基本公式 (背诵)
*   **梯形公式**: $T = \\frac{b-a}{2} [f(a) + f(b)]$
*   **辛普森公式**: $S = \\frac{b-a}{6} [f(a) + 4f(\\frac{a+b}{2}) + f(b)]$

#### 3. 复化求积公式 (大题重点)
把区间分成 $n$ 等份，步长 $h = (b-a)/n$。
*   **复化梯形**:
    $$ T_n = \\frac{h}{2} [f(a) + 2\\sum_{k=1}^{n-1} f(x_k) + f(b)] $$
    (首尾一次，中间乘2)
*   **复化辛普森**:
    $$ S_n = \\frac{h}{3} [f(a) + 4\\sum_{odd} + 2\\sum_{even} + f(b)] $$
    (首尾一次，奇数点乘4，偶数点乘2)

#### 4. 龙贝格 (Romberg)
*   公式联系: $S_n = \\frac{4T_{2n} - T_n}{3}$
`
    },
    {
        id: "ode",
        title: "7. 常微分方程数值解",
        description: "求解 y' = f(x,y)",
        keyPoints: ["欧拉法", "改进欧拉法"],
        content: `
### 核心考点
求解 $y' = f(x, y), y(x_0) = y_0$。

#### 1. 欧拉法 (Euler)
*   **公式 (一阶精度)**:
    $$ y_{n+1} = y_n + h f(x_n, y_n) $$
*   最简单，但精度低。

#### 2. 改进欧拉法 (预测-校正) —— ⭐重点
*   **先预测**: $\\bar{y}_{n+1} = y_n + h f(x_n, y_n)$
*   **后校正**: $y_{n+1} = y_n + \\frac{h}{2} [f(x_n, y_n) + f(x_{n+1}, \\bar{y}_{n+1})]$
*   精度提高到二阶 (梯形公式思想)。
`
    }
];
